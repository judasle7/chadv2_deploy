import{B as X,a as H,p as ct,g as ut,b as lt,l as nr,D as ft,c as ht,d as ir}from"./index-BymRp03L.js";const ar=5;function dt(t){const o=X.alloc(2);return o.writeUInt16BE(t,0),o}const Et={data:X.alloc(0),dataLength:0,sequence:0},pt=(t,o)=>({makeBlocks(s){let r=X.concat([dt(s.length),s]);const n=o-5,f=Math.ceil(r.length/n);r=X.concat([r,X.alloc(f*n-r.length+1).fill(0)]);const c=[];for(let l=0;l<f;l++){const a=X.alloc(5);a.writeUInt16BE(t,0),a.writeUInt8(ar,2),a.writeUInt16BE(l,3);const i=r.slice(l*n,(l+1)*n);c.push(X.concat([a,i]))}return c},reduceResponse(s,r){let{data:n,dataLength:f,sequence:c}=s||Et;if(r.readUInt16BE(0)!==t)throw new H("Invalid channel","InvalidChannel");if(r.readUInt8(2)!==ar)throw new H("Invalid tag","InvalidTag");if(r.readUInt16BE(3)!==c)throw new H("Invalid sequence","InvalidSequence");s||(f=r.readUInt16BE(5)),c++;const l=r.slice(s?5:7);return n=X.concat([n,l]),n.length>f&&(n=n.slice(0,f)),{data:n,dataLength:f,sequence:c}},getReducedResult(s){if(s&&s.dataLength===s.data.length)return s.data}});var W={exports:{}},ae,or;function Z(){if(or)return ae;or=1;const t="2.0.0",o=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,n=o-6;return ae={MAX_LENGTH:o,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ae}var oe,cr;function J(){if(cr)return oe;cr=1;var t={};return oe=typeof ct=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...s)=>console.error("SEMVER",...s):()=>{},oe}var ur;function Y(){return ur||(ur=1,function(t,o){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=Z(),f=J();o=t.exports={};const c=o.re=[],l=o.safeRe=[],a=o.src=[],i=o.safeSrc=[],e=o.t={};let u=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",n],[h,r]],O=N=>{for(const[A,x]of m)N=N.split(`${A}*`).join(`${A}{0,${x}}`).split(`${A}+`).join(`${A}{1,${x}}`);return N},E=(N,A,x)=>{const T=O(A),U=u++;f(N,U,A),e[N]=U,a[U]=A,i[U]=T,c[U]=new RegExp(A,x?"g":void 0),l[U]=new RegExp(T,x?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),E("MAINVERSION",`(${a[e.NUMERICIDENTIFIER]})\\.(${a[e.NUMERICIDENTIFIER]})\\.(${a[e.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${a[e.NUMERICIDENTIFIERLOOSE]})\\.(${a[e.NUMERICIDENTIFIERLOOSE]})\\.(${a[e.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${a[e.NONNUMERICIDENTIFIER]}|${a[e.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${a[e.NONNUMERICIDENTIFIER]}|${a[e.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${a[e.PRERELEASEIDENTIFIER]}(?:\\.${a[e.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${a[e.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[e.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${h}+`),E("BUILD",`(?:\\+(${a[e.BUILDIDENTIFIER]}(?:\\.${a[e.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${a[e.MAINVERSION]}${a[e.PRERELEASE]}?${a[e.BUILD]}?`),E("FULL",`^${a[e.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${a[e.MAINVERSIONLOOSE]}${a[e.PRERELEASELOOSE]}?${a[e.BUILD]}?`),E("LOOSE",`^${a[e.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${a[e.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${a[e.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${a[e.XRANGEIDENTIFIER]})(?:\\.(${a[e.XRANGEIDENTIFIER]})(?:\\.(${a[e.XRANGEIDENTIFIER]})(?:${a[e.PRERELEASE]})?${a[e.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${a[e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[e.XRANGEIDENTIFIERLOOSE]})(?:${a[e.PRERELEASELOOSE]})?${a[e.BUILD]}?)?)?`),E("XRANGE",`^${a[e.GTLT]}\\s*${a[e.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${a[e.GTLT]}\\s*${a[e.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),E("COERCE",`${a[e.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",a[e.COERCEPLAIN]+`(?:${a[e.PRERELEASE]})?(?:${a[e.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",a[e.COERCE],!0),E("COERCERTLFULL",a[e.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${a[e.LONETILDE]}\\s+`,!0),o.tildeTrimReplace="$1~",E("TILDE",`^${a[e.LONETILDE]}${a[e.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${a[e.LONETILDE]}${a[e.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${a[e.LONECARET]}\\s+`,!0),o.caretTrimReplace="$1^",E("CARET",`^${a[e.LONECARET]}${a[e.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${a[e.LONECARET]}${a[e.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${a[e.GTLT]}\\s*(${a[e.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${a[e.GTLT]}\\s*(${a[e.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${a[e.GTLT]}\\s*(${a[e.LOOSEPLAIN]}|${a[e.XRANGEPLAIN]})`,!0),o.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${a[e.XRANGEPLAIN]})\\s+-\\s+(${a[e.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${a[e.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[e.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(W,W.exports)),W.exports}var ce,lr;function Ze(){if(lr)return ce;lr=1;const t=Object.freeze({loose:!0}),o=Object.freeze({});return ce=r=>r?typeof r!="object"?t:r:o,ce}var ue,fr;function rt(){if(fr)return ue;fr=1;const t=/^[0-9]+$/,o=(r,n)=>{const f=t.test(r),c=t.test(n);return f&&c&&(r=+r,n=+n),r===n?0:f&&!c?-1:c&&!f?1:r<n?-1:1};return ue={compareIdentifiers:o,rcompareIdentifiers:(r,n)=>o(n,r)},ue}var le,hr;function b(){if(hr)return le;hr=1;const t=J(),{MAX_LENGTH:o,MAX_SAFE_INTEGER:s}=Z(),{safeRe:r,t:n}=Y(),f=Ze(),{compareIdentifiers:c}=rt();class l{constructor(i,e){if(e=f(e),i instanceof l){if(i.loose===!!e.loose&&i.includePrerelease===!!e.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>o)throw new TypeError(`version is longer than ${o} characters`);t("SemVer",i,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const u=i.trim().match(e.loose?r[n.LOOSE]:r[n.FULL]);if(!u)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const m=+h;if(m>=0&&m<s)return m}return h}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(t("SemVer.compare",this.version,this.options,i),!(i instanceof l)){if(typeof i=="string"&&i===this.version)return 0;i=new l(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof l||(i=new l(i,this.options)),c(this.major,i.major)||c(this.minor,i.minor)||c(this.patch,i.patch)}comparePre(i){if(i instanceof l||(i=new l(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let e=0;do{const u=this.prerelease[e],h=i.prerelease[e];if(t("prerelease compare",e,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return c(u,h)}while(++e)}compareBuild(i){i instanceof l||(i=new l(i,this.options));let e=0;do{const u=this.build[e],h=i.build[e];if(t("build compare",e,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return c(u,h)}while(++e)}inc(i,e,u){if(i.startsWith("pre")){if(!e&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(e){const h=`-${e}`.match(this.options.loose?r[n.PRERELEASELOOSE]:r[n.PRERELEASE]);if(!h||h[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,u),this.inc("pre",e,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,u),this.inc("pre",e,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(e===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(e){let m=[e,h];u===!1&&(m=[e]),c(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return le=l,le}var fe,dr;function M(){if(dr)return fe;dr=1;const t=b();return fe=(s,r,n=!1)=>{if(s instanceof t)return s;try{return new t(s,r)}catch(f){if(!n)return null;throw f}},fe}var he,Er;function mt(){if(Er)return he;Er=1;const t=M();return he=(s,r)=>{const n=t(s,r);return n?n.version:null},he}var de,pr;function Rt(){if(pr)return de;pr=1;const t=M();return de=(s,r)=>{const n=t(s.trim().replace(/^[=v]+/,""),r);return n?n.version:null},de}var Ee,mr;function vt(){if(mr)return Ee;mr=1;const t=b();return Ee=(s,r,n,f,c)=>{typeof n=="string"&&(c=f,f=n,n=void 0);try{return new t(s instanceof t?s.version:s,n).inc(r,f,c).version}catch{return null}},Ee}var pe,Rr;function It(){if(Rr)return pe;Rr=1;const t=M();return pe=(s,r)=>{const n=t(s,null,!0),f=t(r,null,!0),c=n.compare(f);if(c===0)return null;const l=c>0,a=l?n:f,i=l?f:n,e=!!a.prerelease.length;if(!!i.prerelease.length&&!e){if(!i.patch&&!i.minor)return"major";if(i.compareMain(a)===0)return i.minor&&!i.patch?"minor":"patch"}const h=e?"pre":"";return n.major!==f.major?h+"major":n.minor!==f.minor?h+"minor":n.patch!==f.patch?h+"patch":"prerelease"},pe}var me,vr;function $t(){if(vr)return me;vr=1;const t=b();return me=(s,r)=>new t(s,r).major,me}var Re,Ir;function St(){if(Ir)return Re;Ir=1;const t=b();return Re=(s,r)=>new t(s,r).minor,Re}var ve,$r;function Lt(){if($r)return ve;$r=1;const t=b();return ve=(s,r)=>new t(s,r).patch,ve}var Ie,Sr;function gt(){if(Sr)return Ie;Sr=1;const t=M();return Ie=(s,r)=>{const n=t(s,r);return n&&n.prerelease.length?n.prerelease:null},Ie}var $e,Lr;function j(){if(Lr)return $e;Lr=1;const t=b();return $e=(s,r,n)=>new t(s,n).compare(new t(r,n)),$e}var Se,gr;function Nt(){if(gr)return Se;gr=1;const t=j();return Se=(s,r,n)=>t(r,s,n),Se}var Le,Nr;function Ot(){if(Nr)return Le;Nr=1;const t=j();return Le=(s,r)=>t(s,r,!0),Le}var ge,Or;function Je(){if(Or)return ge;Or=1;const t=b();return ge=(s,r,n)=>{const f=new t(s,n),c=new t(r,n);return f.compare(c)||f.compareBuild(c)},ge}var Ne,wr;function wt(){if(wr)return Ne;wr=1;const t=Je();return Ne=(s,r)=>s.sort((n,f)=>t(n,f,r)),Ne}var Oe,Ar;function At(){if(Ar)return Oe;Ar=1;const t=Je();return Oe=(s,r)=>s.sort((n,f)=>t(f,n,r)),Oe}var we,Tr;function Q(){if(Tr)return we;Tr=1;const t=j();return we=(s,r,n)=>t(s,r,n)>0,we}var Ae,Pr;function Qe(){if(Pr)return Ae;Pr=1;const t=j();return Ae=(s,r,n)=>t(s,r,n)<0,Ae}var Te,qr;function tt(){if(qr)return Te;qr=1;const t=j();return Te=(s,r,n)=>t(s,r,n)===0,Te}var Pe,Cr;function st(){if(Cr)return Pe;Cr=1;const t=j();return Pe=(s,r,n)=>t(s,r,n)!==0,Pe}var qe,yr;function er(){if(yr)return qe;yr=1;const t=j();return qe=(s,r,n)=>t(s,r,n)>=0,qe}var Ce,Dr;function rr(){if(Dr)return Ce;Dr=1;const t=j();return Ce=(s,r,n)=>t(s,r,n)<=0,Ce}var ye,xr;function nt(){if(xr)return ye;xr=1;const t=tt(),o=st(),s=Q(),r=er(),n=Qe(),f=rr();return ye=(l,a,i,e)=>{switch(a){case"===":return typeof l=="object"&&(l=l.version),typeof i=="object"&&(i=i.version),l===i;case"!==":return typeof l=="object"&&(l=l.version),typeof i=="object"&&(i=i.version),l!==i;case"":case"=":case"==":return t(l,i,e);case"!=":return o(l,i,e);case">":return s(l,i,e);case">=":return r(l,i,e);case"<":return n(l,i,e);case"<=":return f(l,i,e);default:throw new TypeError(`Invalid operator: ${a}`)}},ye}var De,Ur;function Tt(){if(Ur)return De;Ur=1;const t=b(),o=M(),{safeRe:s,t:r}=Y();return De=(f,c)=>{if(f instanceof t)return f;if(typeof f=="number"&&(f=String(f)),typeof f!="string")return null;c=c||{};let l=null;if(!c.rtl)l=f.match(c.includePrerelease?s[r.COERCEFULL]:s[r.COERCE]);else{const m=c.includePrerelease?s[r.COERCERTLFULL]:s[r.COERCERTL];let O;for(;(O=m.exec(f))&&(!l||l.index+l[0].length!==f.length);)(!l||O.index+O[0].length!==l.index+l[0].length)&&(l=O),m.lastIndex=O.index+O[1].length+O[2].length;m.lastIndex=-1}if(l===null)return null;const a=l[2],i=l[3]||"0",e=l[4]||"0",u=c.includePrerelease&&l[5]?`-${l[5]}`:"",h=c.includePrerelease&&l[6]?`+${l[6]}`:"";return o(`${a}.${i}.${e}${u}${h}`,c)},De}var xe,_r;function Pt(){if(_r)return xe;_r=1;class t{constructor(){this.max=1e3,this.map=new Map}get(s){const r=this.map.get(s);if(r!==void 0)return this.map.delete(s),this.map.set(s,r),r}delete(s){return this.map.delete(s)}set(s,r){if(!this.delete(s)&&r!==void 0){if(this.map.size>=this.max){const f=this.map.keys().next().value;this.delete(f)}this.map.set(s,r)}return this}}return xe=t,xe}var Ue,br;function F(){if(br)return Ue;br=1;const t=/\s+/g;class o{constructor(d,I){if(I=n(I),d instanceof o)return d.loose===!!I.loose&&d.includePrerelease===!!I.includePrerelease?d:new o(d.raw,I);if(d instanceof f)return this.raw=d.value,this.set=[[d]],this.formatted=void 0,this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=d.trim().replace(t," "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter($=>!E($[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&N($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let d=0;d<this.set.length;d++){d>0&&(this.formatted+="||");const I=this.set[d];for(let R=0;R<I.length;R++)R>0&&(this.formatted+=" "),this.formatted+=I[R].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(d){const R=((this.options.includePrerelease&&m)|(this.options.loose&&O))+":"+d,$=r.get(R);if($)return $;const v=this.options.loose,S=v?a[i.HYPHENRANGELOOSE]:a[i.HYPHENRANGE];d=d.replace(S,ne(this.options.includePrerelease)),c("hyphen replace",d),d=d.replace(a[i.COMPARATORTRIM],e),c("comparator trim",d),d=d.replace(a[i.TILDETRIM],u),c("tilde trim",d),d=d.replace(a[i.CARETTRIM],h),c("caret trim",d);let w=d.split(" ").map(C=>x(C,this.options)).join(" ").split(/\s+/).map(C=>se(C,this.options));v&&(w=w.filter(C=>(c("loose invalid filter",C,this.options),!!C.match(a[i.COMPARATORLOOSE])))),c("range list",w);const g=new Map,P=w.map(C=>new f(C,this.options));for(const C of P){if(E(C))return[C];g.set(C.value,C)}g.size>1&&g.has("")&&g.delete("");const _=[...g.values()];return r.set(R,_),_}intersects(d,I){if(!(d instanceof o))throw new TypeError("a Range is required");return this.set.some(R=>A(R,I)&&d.set.some($=>A($,I)&&R.every(v=>$.every(S=>v.intersects(S,I)))))}test(d){if(!d)return!1;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(ie(this.set[I],d,this.options))return!0;return!1}}Ue=o;const s=Pt(),r=new s,n=Ze(),f=ee(),c=J(),l=b(),{safeRe:a,t:i,comparatorTrimReplace:e,tildeTrimReplace:u,caretTrimReplace:h}=Y(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:O}=Z(),E=p=>p.value==="<0.0.0-0",N=p=>p.value==="",A=(p,d)=>{let I=!0;const R=p.slice();let $=R.pop();for(;I&&R.length;)I=R.every(v=>$.intersects(v,d)),$=R.pop();return I},x=(p,d)=>(c("comp",p,d),p=q(p,d),c("caret",p),p=U(p,d),c("tildes",p),p=L(p,d),c("xrange",p),p=te(p,d),c("stars",p),p),T=p=>!p||p.toLowerCase()==="x"||p==="*",U=(p,d)=>p.trim().split(/\s+/).map(I=>G(I,d)).join(" "),G=(p,d)=>{const I=d.loose?a[i.TILDELOOSE]:a[i.TILDE];return p.replace(I,(R,$,v,S,w)=>{c("tilde",p,R,$,v,S,w);let g;return T($)?g="":T(v)?g=`>=${$}.0.0 <${+$+1}.0.0-0`:T(S)?g=`>=${$}.${v}.0 <${$}.${+v+1}.0-0`:w?(c("replaceTilde pr",w),g=`>=${$}.${v}.${S}-${w} <${$}.${+v+1}.0-0`):g=`>=${$}.${v}.${S} <${$}.${+v+1}.0-0`,c("tilde return",g),g})},q=(p,d)=>p.trim().split(/\s+/).map(I=>D(I,d)).join(" "),D=(p,d)=>{c("caret",p,d);const I=d.loose?a[i.CARETLOOSE]:a[i.CARET],R=d.includePrerelease?"-0":"";return p.replace(I,($,v,S,w,g)=>{c("caret",p,$,v,S,w,g);let P;return T(v)?P="":T(S)?P=`>=${v}.0.0${R} <${+v+1}.0.0-0`:T(w)?v==="0"?P=`>=${v}.${S}.0${R} <${v}.${+S+1}.0-0`:P=`>=${v}.${S}.0${R} <${+v+1}.0.0-0`:g?(c("replaceCaret pr",g),v==="0"?S==="0"?P=`>=${v}.${S}.${w}-${g} <${v}.${S}.${+w+1}-0`:P=`>=${v}.${S}.${w}-${g} <${v}.${+S+1}.0-0`:P=`>=${v}.${S}.${w}-${g} <${+v+1}.0.0-0`):(c("no pr"),v==="0"?S==="0"?P=`>=${v}.${S}.${w}${R} <${v}.${S}.${+w+1}-0`:P=`>=${v}.${S}.${w}${R} <${v}.${+S+1}.0-0`:P=`>=${v}.${S}.${w} <${+v+1}.0.0-0`),c("caret return",P),P})},L=(p,d)=>(c("replaceXRanges",p,d),p.split(/\s+/).map(I=>B(I,d)).join(" ")),B=(p,d)=>{p=p.trim();const I=d.loose?a[i.XRANGELOOSE]:a[i.XRANGE];return p.replace(I,(R,$,v,S,w,g)=>{c("xRange",p,R,$,v,S,w,g);const P=T(v),_=P||T(S),C=_||T(w),z=C;return $==="="&&z&&($=""),g=d.includePrerelease?"-0":"",P?$===">"||$==="<"?R="<0.0.0-0":R="*":$&&z?(_&&(S=0),w=0,$===">"?($=">=",_?(v=+v+1,S=0,w=0):(S=+S+1,w=0)):$==="<="&&($="<",_?v=+v+1:S=+S+1),$==="<"&&(g="-0"),R=`${$+v}.${S}.${w}${g}`):_?R=`>=${v}.0.0${g} <${+v+1}.0.0-0`:C&&(R=`>=${v}.${S}.0${g} <${v}.${+S+1}.0-0`),c("xRange return",R),R})},te=(p,d)=>(c("replaceStars",p,d),p.trim().replace(a[i.STAR],"")),se=(p,d)=>(c("replaceGTE0",p,d),p.trim().replace(a[d.includePrerelease?i.GTE0PRE:i.GTE0],"")),ne=p=>(d,I,R,$,v,S,w,g,P,_,C,z)=>(T(R)?I="":T($)?I=`>=${R}.0.0${p?"-0":""}`:T(v)?I=`>=${R}.${$}.0${p?"-0":""}`:S?I=`>=${I}`:I=`>=${I}${p?"-0":""}`,T(P)?g="":T(_)?g=`<${+P+1}.0.0-0`:T(C)?g=`<${P}.${+_+1}.0-0`:z?g=`<=${P}.${_}.${C}-${z}`:p?g=`<${P}.${_}.${+C+1}-0`:g=`<=${g}`,`${I} ${g}`.trim()),ie=(p,d,I)=>{for(let R=0;R<p.length;R++)if(!p[R].test(d))return!1;if(d.prerelease.length&&!I.includePrerelease){for(let R=0;R<p.length;R++)if(c(p[R].semver),p[R].semver!==f.ANY&&p[R].semver.prerelease.length>0){const $=p[R].semver;if($.major===d.major&&$.minor===d.minor&&$.patch===d.patch)return!0}return!1}return!0};return Ue}var _e,Gr;function ee(){if(Gr)return _e;Gr=1;const t=Symbol("SemVer ANY");class o{static get ANY(){return t}constructor(e,u){if(u=s(u),e instanceof o){if(e.loose===!!u.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c("comparator",e,u),this.options=u,this.loose=!!u.loose,this.parse(e),this.semver===t?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const u=this.options.loose?r[n.COMPARATORLOOSE]:r[n.COMPARATOR],h=e.match(u);if(!h)throw new TypeError(`Invalid comparator: ${e}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new l(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if(typeof e=="string")try{e=new l(e,this.options)}catch{return!1}return f(e,this.operator,this.semver,this.options)}intersects(e,u){if(!(e instanceof o))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(e.value,u).test(this.value):e.operator===""?e.value===""?!0:new a(this.value,u).test(e.semver):(u=s(u),u.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||f(this.semver,"<",e.semver,u)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||f(this.semver,">",e.semver,u)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}_e=o;const s=Ze(),{safeRe:r,t:n}=Y(),f=nt(),c=J(),l=b(),a=F();return _e}var be,jr;function re(){if(jr)return be;jr=1;const t=F();return be=(s,r,n)=>{try{r=new t(r,n)}catch{return!1}return r.test(s)},be}var Ge,Fr;function qt(){if(Fr)return Ge;Fr=1;const t=F();return Ge=(s,r)=>new t(s,r).set.map(n=>n.map(f=>f.value).join(" ").trim().split(" ")),Ge}var je,Xr;function Ct(){if(Xr)return je;Xr=1;const t=b(),o=F();return je=(r,n,f)=>{let c=null,l=null,a=null;try{a=new o(n,f)}catch{return null}return r.forEach(i=>{a.test(i)&&(!c||l.compare(i)===-1)&&(c=i,l=new t(c,f))}),c},je}var Fe,Vr;function yt(){if(Vr)return Fe;Vr=1;const t=b(),o=F();return Fe=(r,n,f)=>{let c=null,l=null,a=null;try{a=new o(n,f)}catch{return null}return r.forEach(i=>{a.test(i)&&(!c||l.compare(i)===1)&&(c=i,l=new t(c,f))}),c},Fe}var Xe,kr;function Dt(){if(kr)return Xe;kr=1;const t=b(),o=F(),s=Q();return Xe=(n,f)=>{n=new o(n,f);let c=new t("0.0.0");if(n.test(c)||(c=new t("0.0.0-0"),n.test(c)))return c;c=null;for(let l=0;l<n.set.length;++l){const a=n.set[l];let i=null;a.forEach(e=>{const u=new t(e.semver.version);switch(e.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!i||s(u,i))&&(i=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),i&&(!c||s(c,i))&&(c=i)}return c&&n.test(c)?c:null},Xe}var Ve,Mr;function xt(){if(Mr)return Ve;Mr=1;const t=F();return Ve=(s,r)=>{try{return new t(s,r).range||"*"}catch{return null}},Ve}var ke,Br;function tr(){if(Br)return ke;Br=1;const t=b(),o=ee(),{ANY:s}=o,r=F(),n=re(),f=Q(),c=Qe(),l=rr(),a=er();return ke=(e,u,h,m)=>{e=new t(e,m),u=new r(u,m);let O,E,N,A,x;switch(h){case">":O=f,E=l,N=c,A=">",x=">=";break;case"<":O=c,E=a,N=f,A="<",x="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(e,u,m))return!1;for(let T=0;T<u.set.length;++T){const U=u.set[T];let G=null,q=null;if(U.forEach(D=>{D.semver===s&&(D=new o(">=0.0.0")),G=G||D,q=q||D,O(D.semver,G.semver,m)?G=D:N(D.semver,q.semver,m)&&(q=D)}),G.operator===A||G.operator===x||(!q.operator||q.operator===A)&&E(e,q.semver))return!1;if(q.operator===x&&N(e,q.semver))return!1}return!0},ke}var Me,zr;function Ut(){if(zr)return Me;zr=1;const t=tr();return Me=(s,r,n)=>t(s,r,">",n),Me}var Be,Hr;function _t(){if(Hr)return Be;Hr=1;const t=tr();return Be=(s,r,n)=>t(s,r,"<",n),Be}var ze,Yr;function bt(){if(Yr)return ze;Yr=1;const t=F();return ze=(s,r,n)=>(s=new t(s,n),r=new t(r,n),s.intersects(r,n)),ze}var He,Wr;function Gt(){if(Wr)return He;Wr=1;const t=re(),o=j();return He=(s,r,n)=>{const f=[];let c=null,l=null;const a=s.sort((h,m)=>o(h,m,n));for(const h of a)t(h,r,n)?(l=h,c||(c=h)):(l&&f.push([c,l]),l=null,c=null);c&&f.push([c,null]);const i=[];for(const[h,m]of f)h===m?i.push(h):!m&&h===a[0]?i.push("*"):m?h===a[0]?i.push(`<=${m}`):i.push(`${h} - ${m}`):i.push(`>=${h}`);const e=i.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return e.length<u.length?e:r},He}var Ye,Kr;function jt(){if(Kr)return Ye;Kr=1;const t=F(),o=ee(),{ANY:s}=o,r=re(),n=j(),f=(u,h,m={})=>{if(u===h)return!0;u=new t(u,m),h=new t(h,m);let O=!1;e:for(const E of u.set){for(const N of h.set){const A=a(E,N,m);if(O=O||A!==null,A)continue e}if(O)return!1}return!0},c=[new o(">=0.0.0-0")],l=[new o(">=0.0.0")],a=(u,h,m)=>{if(u===h)return!0;if(u.length===1&&u[0].semver===s){if(h.length===1&&h[0].semver===s)return!0;m.includePrerelease?u=c:u=l}if(h.length===1&&h[0].semver===s){if(m.includePrerelease)return!0;h=l}const O=new Set;let E,N;for(const L of u)L.operator===">"||L.operator===">="?E=i(E,L,m):L.operator==="<"||L.operator==="<="?N=e(N,L,m):O.add(L.semver);if(O.size>1)return null;let A;if(E&&N){if(A=n(E.semver,N.semver,m),A>0)return null;if(A===0&&(E.operator!==">="||N.operator!=="<="))return null}for(const L of O){if(E&&!r(L,String(E),m)||N&&!r(L,String(N),m))return null;for(const B of h)if(!r(L,String(B),m))return!1;return!0}let x,T,U,G,q=N&&!m.includePrerelease&&N.semver.prerelease.length?N.semver:!1,D=E&&!m.includePrerelease&&E.semver.prerelease.length?E.semver:!1;q&&q.prerelease.length===1&&N.operator==="<"&&q.prerelease[0]===0&&(q=!1);for(const L of h){if(G=G||L.operator===">"||L.operator===">=",U=U||L.operator==="<"||L.operator==="<=",E){if(D&&L.semver.prerelease&&L.semver.prerelease.length&&L.semver.major===D.major&&L.semver.minor===D.minor&&L.semver.patch===D.patch&&(D=!1),L.operator===">"||L.operator===">="){if(x=i(E,L,m),x===L&&x!==E)return!1}else if(E.operator===">="&&!r(E.semver,String(L),m))return!1}if(N){if(q&&L.semver.prerelease&&L.semver.prerelease.length&&L.semver.major===q.major&&L.semver.minor===q.minor&&L.semver.patch===q.patch&&(q=!1),L.operator==="<"||L.operator==="<="){if(T=e(N,L,m),T===L&&T!==N)return!1}else if(N.operator==="<="&&!r(N.semver,String(L),m))return!1}if(!L.operator&&(N||E)&&A!==0)return!1}return!(E&&U&&!N&&A!==0||N&&G&&!E&&A!==0||D||q)},i=(u,h,m)=>{if(!u)return h;const O=n(u.semver,h.semver,m);return O>0?u:O<0||h.operator===">"&&u.operator===">="?h:u},e=(u,h,m)=>{if(!u)return h;const O=n(u.semver,h.semver,m);return O<0?u:O>0||h.operator==="<"&&u.operator==="<="?h:u};return Ye=f,Ye}var We,Zr;function Ft(){if(Zr)return We;Zr=1;const t=Y(),o=Z(),s=b(),r=rt(),n=M(),f=mt(),c=Rt(),l=vt(),a=It(),i=$t(),e=St(),u=Lt(),h=gt(),m=j(),O=Nt(),E=Ot(),N=Je(),A=wt(),x=At(),T=Q(),U=Qe(),G=tt(),q=st(),D=er(),L=rr(),B=nt(),te=Tt(),se=ee(),ne=F(),ie=re(),p=qt(),d=Ct(),I=yt(),R=Dt(),$=xt(),v=tr(),S=Ut(),w=_t(),g=bt(),P=Gt(),_=jt();return We={parse:n,valid:f,clean:c,inc:l,diff:a,major:i,minor:e,patch:u,prerelease:h,compare:m,rcompare:O,compareLoose:E,compareBuild:N,sort:A,rsort:x,gt:T,lt:U,eq:G,neq:q,gte:D,lte:L,cmp:B,coerce:te,Comparator:se,Range:ne,satisfies:ie,toComparators:p,maxSatisfying:d,minSatisfying:I,minVersion:R,validRange:$,outside:v,gtr:S,ltr:w,intersects:g,simplifyRange:P,subset:_,SemVer:s,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},We}var Xt=Ft();const Jr=ut(Xt);var y;(function(t){t.blue="blue",t.nanoS="nanoS",t.nanoSP="nanoSP",t.nanoX="nanoX",t.stax="stax",t.europa="europa"})(y||(y={}));const Ke={[y.blue]:{id:y.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:t=>4*1024},[y.nanoS]:{id:y.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:t=>{var o;return Jr.lt((o=Jr.coerce(t))!==null&&o!==void 0?o:"","2.0.0")?4*1024:2*1024}},[y.nanoX]:{id:y.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:t=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[y.nanoSP]:{id:y.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:t=>32},[y.stax]:{id:y.stax,productName:"Ledger Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:t=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[y.europa]:{id:y.europa,productName:"Ledger Flex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:t=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};y.blue,y.nanoS,y.nanoSP,y.nanoX,y.stax,y.europa;const Qr=Object.values(Ke),it=11415,at=t=>{const o=Qr.find(n=>n.legacyUsbProductId===t);if(o)return o;const s=t>>8;return Qr.find(n=>n.productIdMM===s)},Vt=[],et={};for(const t in Ke){const o=Ke[t],{bluetoothSpec:s}=o;if(s)for(let r=0;r<s.length;r++){const n=s[r];Vt.push(n.serviceUuid),et[n.serviceUuid]=et[n.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:o},n)}}var V=function(t,o,s,r){function n(f){return f instanceof s?f:new s(function(c){c(f)})}return new(s||(s=Promise))(function(f,c){function l(e){try{i(r.next(e))}catch(u){c(u)}}function a(e){try{i(r.throw(e))}catch(u){c(u)}}function i(e){e.done?f(e.value):n(e.value).then(l,a)}i((r=r.apply(t,o||[])).next())})};const kt=[{vendorId:it}],Mt=()=>Promise.resolve(!!(window.navigator&&window.navigator.hid)),K=()=>{const{hid:t}=navigator;if(!t)throw new H("navigator.hid is not supported","HIDNotSupported");return t};function ot(){return V(this,void 0,void 0,function*(){const t=yield K().requestDevice({filters:kt});return Array.isArray(t)?t:[t]})}function sr(){return V(this,void 0,void 0,function*(){return(yield K().getDevices()).filter(o=>o.vendorId===it)})}function Bt(){return V(this,void 0,void 0,function*(){const t=yield sr();return t.length>0?t[0]:(yield ot())[0]})}class k extends lt{constructor(o){super(),this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(s=>{this.inputCallback=s}),this.onInputReport=s=>{const r=X.from(s.data.buffer);this.inputCallback?(this.inputCallback(r),this.inputCallback=null):this.inputs.push(r)},this._disconnectEmitted=!1,this._emitDisconnect=s=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",s))},this.exchange=s=>V(this,void 0,void 0,function*(){return yield this.exchangeAtomicImpl(()=>V(this,void 0,void 0,function*(){const{channel:n,packetSize:f}=this;nr("apdu","=> "+s.toString("hex"));const c=pt(n,f),l=c.makeBlocks(s);for(let e=0;e<l.length;e++)yield this.device.sendReport(0,l[e]);let a,i;for(;!(a=c.getReducedResult(i));)try{const e=yield this.read();i=c.reduceResponse(i,e)}catch(e){if(e instanceof H&&e.id==="InvalidChannel")continue;throw e}return nr("apdu","<= "+a.toString("hex")),a})).catch(n=>{throw n&&n.message&&n.message.includes("write")?(this._emitDisconnect(n),new ft(n.message)):n})}),this.device=o,this.deviceModel=typeof o.productId=="number"?at(o.productId):void 0,o.addEventListener("inputreport",this.onInputReport)}static request(){return V(this,void 0,void 0,function*(){const[o]=yield ot();return k.open(o)})}static openConnected(){return V(this,void 0,void 0,function*(){const o=yield sr();return o.length===0?null:k.open(o[0])})}static open(o){return V(this,void 0,void 0,function*(){yield o.open();const s=new k(o),r=n=>{o===n.device&&(K().removeEventListener("disconnect",r),s._emitDisconnect(new ht))};return K().addEventListener("disconnect",r),s})}close(){return V(this,void 0,void 0,function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()})}setScrambleKey(){}}k.isSupported=Mt;k.list=sr;k.listen=t=>{let o=!1;Bt().then(r=>{if(!r)t.error(new ir("Access denied to use Ledger device"));else if(!o){const n=typeof r.productId=="number"?at(r.productId):void 0;t.next({type:"add",descriptor:r,deviceModel:n}),t.complete()}},r=>{t.error(new ir(r.message))});function s(){o=!0}return{unsubscribe:s}};export{k as default};
